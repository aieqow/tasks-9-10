#include <iostream>
#include <vector>
using namespace std;

// Тернарный поиск для унимодальных функций
int ternarySearch(const vector<int>& arr, int target) {
    int left = 0;
    int right = arr.size() - 1;
    while (left <= right) {
        int mid1 = left + (right - left) / 3;
        int mid2 = right - (right - left) / 3;
        if (arr[mid1] == target) {
            return mid1;
        }
        if (arr[mid2] == target) {
            return mid2;
        }
        if (target < arr[mid1]) {
            right = mid1 - 1;
        } else if (target > arr[mid2]) {
            left = mid2 + 1;
        } else {
            left = mid1 + 1;
            right = mid2 - 1;
        }
    }
    return -1;
}
// Тернарный поиск для нахождения максимума унимодальной функции
double ternarySearchMax(double left, double right, double (*f)(double), double eps = 1e-9) {
    while (right - left > eps) {
        double mid1 = left + (right - left) / 3;
        double mid2 = right - (right - left) / 3;
        if (f(mid1) < f(mid2)) {
            left = mid1;
        } else {
            right = mid2;
        }
    }
    return (left + right) / 2;
}
// Пример функции для поиска максимума
double parabola(double x) {
    return -x * x + 4 * x - 3; // максимум в x = 2
}
int main() {
    // Поиск в массиве
    vector<int> arr = {1, 3, 5, 7, 9, 11, 13, 15};
    int target = 7;
    int result = ternarySearch(arr, target);
    cout << "Элемент " << target << " найден по индексу: " << result << endl;
    // Поиск максимума функции
    double maxPoint = ternarySearchMax(0, 4, parabola);
    cout << "Максимум функции в x = " << maxPoint << endl;
    cout << "Значение функции: " << parabola(maxPoint) << endl;
    return 0;
}
